{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>{{ book.title }} - Details</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
  <div class="container mt-5">
    <!-- Book Detail Card -->
    <div class="card shadow-lg mb-4">
      {% if book.cover %}
        <img src="{{ book.cover.url }}" class="card-img-top" alt="{{ book.title }}">
      {% else %}
        <img src="{% static 'default_book.jpg' %}" class="card-img-top" alt="Default Book">
      {% endif %}

      <div class="card-body">
        <h2 class="card-title">{{ book.title }}</h2>
        <p><strong>Author:</strong> {{ book.author }}</p>
        <p><strong>Genre:</strong> {{ book.genre }}</p>
        <p><strong>Condition:</strong> {{ book.condition }}</p>
        <p><strong>Description:</strong> {{ book.description }}</p>
        <p><strong>Price:</strong> ₹{{ book.price }}</p>

        <a href="{% url 'dashboard' %}" class="btn btn-primary">⬅ Back to Dashboard</a>
      </div>
    </div>

    <!-- Reviews Section -->
    <div class="card shadow mb-4">
      <div class="card-body">
        <h4>⭐ Reviews</h4>
        {% if average_rating %}
          <p><strong>Average Rating:</strong> {{ average_rating|floatformat:1 }}/5</p>
        {% else %}
          <p>No ratings yet.</p>
        {% endif %}

        {% if reviews %}
          <ul class="list-group">
            {% for review in reviews %}
              <li class="list-group-item">
                <strong>{{ review.reviewer.username }}</strong> rated 
                <span class="badge bg-warning text-dark">{{ review.rating }}/5</span>
                <p class="mb-0">{{ review.comment }}</p>
              </li>
            {% endfor %}
          </ul>
        {% else %}
          <p class="text-muted">No reviews yet. Be the first to review!</p>
        {% endif %}
      </div>
    </div>

    <!-- Add Review Form -->
    <div class="card shadow">
      <div class="card-body">
        <h4>✍ Add Your Review</h4>
        <form method="POST">
          {% csrf_token %}
          <div class="mb-3">
            {{ form.rating.label_tag }}
            {{ form.rating }}
          </div>
          <div class="mb-3">
            {{ form.comment.label_tag }}
            {{ form.comment }}
          </div>
          <button type="submit" name="review_submit" class="btn btn-success">Submit Review</button>
        </form>
      </div>
    </div>
  </div>
</body>
</html>


